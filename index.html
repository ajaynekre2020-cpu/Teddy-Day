<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Teddy Day Surprise (Mobile)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#ffb3cc" />
  <style>
    :root{
      /* Colors */
      --bg1:#ffe6f0;
      --bg2:#ffd1e1;
      --bubble-bg:#ffffff;
      --bubble-fg:#d63384;
      --shadow:0 10px 30px rgba(0,0,0,.12);

      /* Sizing tuned for phones */
      --teddy-size: clamp(220px, 62vw, 360px);
      --bubble-fs: clamp(18px, 4.8vw, 28px);
      --emoji-fs: clamp(28px, 10vw, 48px);
      --tap-outline:#ff6fa4;

      /* Motion */
      --shake-amp: 10px;
      --dur-tickle: 420ms;
      --dur-float: 1400ms;
      --dur-float-teddy: 2000ms;

      /* Image URL (single source online) */
      --teddy-url: url("https://pngimg.com/uploads/teddy_bear/teddy_bear_PNG36.png");
    }

    /* Respect users who prefer less motion */
    @media (prefers-reduced-motion: reduce){
      *{ animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; }
    }

    html,body{
      height:100%;
      margin:0;
    }

    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Comic Sans MS", cursive, sans-serif;
      color:#222;
      background: radial-gradient(1200px 1200px at 50% -10%, var(--bg2), var(--bg1));
      min-height: 100dvh;            /* stable height on mobile (S23) */
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      padding: env(safe-area-inset-top) env(safe-area-inset-right)
               env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    /* Stage keeps everything inside and centered */
    .stage{
      position:relative;
      width: 100%;
      max-width: 480px;           /* comfy on phones */
      min-height: min(100dvh, 860px);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      padding-inline:16px;
      z-index:0;
    }

    /* Subtle floating heart background */
    .bg-hearts{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:.18;
      z-index:0;
    }
    .bg-hearts::before,
    .bg-hearts::after{
      content:"üíñ üíï üíó üíû üíì";
      position:absolute;
      left:8%;
      top:70%;
      font-size: clamp(18px, 7vw, 40px);
      line-height:1.6;
      filter: blur(0.2px);
      animation: slowFloat 12s linear infinite;
    }
    .bg-hearts::after{
      left:auto; right:10%; top:18%;
      animation-duration: 16s;
      transform: scale(1.1);
    }
    @keyframes slowFloat{
      0%{ transform: translateY(0) }
      50%{ transform: translateY(-10px) }
      100%{ transform: translateY(0) }
    }

    .teddy-wrap{
      position:relative;
      z-index:2;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:16px;
    }

    /* Button container */
    .teddy-btn{
      appearance:none;
      border:none;
      background: transparent;
      width: var(--teddy-size);
      height: var(--teddy-size);
      padding:0;
      border-radius: 24px;
      cursor: pointer;
      position:relative;
      outline: none;
      box-shadow: var(--shadow);
      background-color: #fff7fa;
      transition: transform 120ms ease;
      will-change: transform;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden; /* keep image inside rounded corners */
    }
    .teddy-btn:active{ transform: scale(.98); }
    .teddy-btn:focus-visible{ outline: 3px solid var(--tap-outline); outline-offset: 4px; }

    /* Teddy image (online URL only) */
    .teddy-img{
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
      user-select: none;
      -webkit-user-drag: none;
      pointer-events: none; /* tap goes to the button */
    }

    .tickle{ animation: tickle var(--dur-tickle) ease-in-out; }
    @keyframes tickle{
      0%{ transform: translate(0,0) rotate(0) }
      20%{ transform: translate(calc(-1*var(--shake-amp)),0) rotate(-4deg) }
      40%{ transform: translate(var(--shake-amp),0) rotate(4deg) }
      60%{ transform: translate(calc(-1*var(--shake-amp)),0) rotate(-3deg) }
      80%{ transform: translate(var(--shake-amp),0) rotate(3deg) }
      100%{ transform: translate(0,0) rotate(0) }
    }

    .bubble{
      position:absolute;
      background: var(--bubble-bg);
      color: var(--bubble-fg);
      font-weight: 800;
      font-size: var(--bubble-fs);
      line-height: 1.2;
      text-align:center;
      padding: 14px 16px;
      border-radius: 16px;
      box-shadow: var(--shadow);
      z-index:3;
      transform: translate(-50%, -50%);
      will-change: transform;
      animation: pulse 1400ms ease-in-out infinite;
    }
    @keyframes pulse{
      0%{ transform: translate(-50%,-50%) scale(1) }
      50%{ transform: translate(-50%,-50%) scale(1.04) }
      100%{ transform: translate(-50%,-50%) scale(1) }
    }

    /* Bubble anchor positions (kept well inside on phones) */
    .at-top{ left:50%; top:18%; }
    .at-bottom{ left:50%; top:84%; }
    .at-left{ left:16%; top:50%; transform: translate(0,-50%); }
    .at-right{ left:84%; top:50%; transform: translate(0,-50%); }

    /* Floating effects */
    .burst{
      position:absolute;
      left:0; top:0;
      pointer-events:none;
      will-change: transform, opacity;
      z-index:1;
    }
    .burst-emoji{
      font-size: var(--emoji-fs);
      animation: floatUp var(--dur-float) ease-out forwards;
      text-shadow: 0 1px 0 rgba(0,0,0,.08);
    }
    @keyframes floatUp{
      0%{ transform: translate(var(--x,0), var(--y,0)) translate(-50%,-50%); opacity:1 }
      100%{ transform: translate(var(--x,0), calc(var(--y,0) - 26vh)) translate(-50%,-50%); opacity:0 }
    }

    .burst-teddy{
      width: clamp(42px, 18vw, 82px);
      height: clamp(42px, 18vw, 82px);
      background-image: var(--teddy-url);
      background-size: contain;
      background-repeat:no-repeat;
      background-position:center;
      filter: drop-shadow(0 6px 8px rgba(0,0,0,.12));
      animation: floatUpTeddy var(--dur-float-teddy) ease-out forwards;
    }
    @keyframes floatUpTeddy{
      0%{ transform: translate(var(--x,0), var(--y,0)) translate(-50%,-50%) scale(1); opacity:1 }
      100%{ transform: translate(var(--x,0), calc(var(--y,0) - 34vh)) translate(-50%,-50%) scale(.72); opacity:0 }
    }

    /* Footer hint */
    .hint{
      position:absolute;
      bottom: max(12px, env(safe-area-inset-bottom));
      left:50%; transform:translateX(-50%);
      font-size: clamp(12px, 3.6vw, 14px);
      color:#a22c66;
      background: rgba(255,255,255,.8);
      padding: 8px 12px;
      border-radius: 999px;
      box-shadow: 0 4px 10px rgba(0,0,0,.08);
      z-index:2;
      user-select:none;
    }
  </style>
</head>
<body>
  <div class="stage" aria-live="polite">
    <div class="bg-hearts" aria-hidden="true"></div>

    <div class="teddy-wrap">
      <!-- Teddy button with online image -->
      <button id="teddy" class="teddy-btn" aria-label="Tickle the teddy" title="Tickle the teddy">
        <img
          class="teddy-img"
          src="https://pngimg.com/uploads/teddy_bear/teddy_bear_PNG36.png"
          alt="Cute teddy bear" />
      </button>

      <!-- Opening bubble -->
      <div id="opening" class="bubble at-top">
        Hey Diya, wanna play with me? üíï
      </div>

      <!-- Dynamic message bubble -->
      <div id="message" class="bubble at-right" style="display:none;">
        Hehe! That tickles! üß∏üíñ üòÇü§£
      </div>
    </div>

    <div class="hint">Tap the teddy üêª to tickle</div>
  </div>

  <script>
    const teddyBtn = document.getElementById('teddy');
    const message = document.getElementById('message');
    const opening = document.getElementById('opening');
    const stage = document.querySelector('.stage');

    const lines = [
      "Hehe! Don't do this! üß∏üíñ üòÇü§£",
      "Your smile is very beautiful! üòçüíï",
      "Oops, your eyes too! üëÄüòç",
      "Are you blushing?! ü§≠üëÄ",
      "You look pretty when you blush üòçüíï",
      "Happy Teddy Day! üêªüíïü§£"
    ];
    let idx = 0;

    const posClasses = ['at-top','at-bottom','at-left','at-right'];
    const emojis = ['üòÇ','ü§£','üòÜ'];

    // Cap effect nodes so the DOM stays light on repeated taps
    const MAX_LIVE = 18;
    const live = new Set();

    function rand(min,max){ return Math.random()*(max-min)+min; }

    function randomPointInside(){
      const r = stage.getBoundingClientRect();
      // leave some padding from edges
      const x = rand(r.width*0.12, r.width*0.88);
      const y = rand(r.height*0.18, r.height*0.88);
      return { x, y };
    }

    function addBurstEmoji(x,y){
      const el = document.createElement('div');
      el.className = 'burst burst-emoji';
      el.textContent = emojis[Math.floor(Math.random()*emojis.length)];
      el.style.setProperty('--x', x+'px');
      el.style.setProperty('--y', y+'px');
      stage.appendChild(el);
      live.add(el);
      setTimeout(()=>{ el.remove(); live.delete(el); }, 1500);
    }

    function addBurstTeddy(x,y){
      const el = document.createElement('div');
      el.className = 'burst burst-teddy';
      el.style.setProperty('--x', x+'px');
      el.style.setProperty('--y', y+'px');
      stage.appendChild(el);
      live.add(el);
      setTimeout(()=>{ el.remove(); live.delete(el); }, 2100);
    }

    function effects(){
      const room = Math.max(0, MAX_LIVE - live.size);
      const tCount = Math.min(6, Math.floor(room * 0.6));
      const eCount = Math.min(6, Math.floor(room * 0.6));

      for(let i=0;i<tCount;i++){
        const {x,y} = randomPointInside();
        setTimeout(()=>addBurstTeddy(x,y), i*40);
      }
      for(let i=0;i<eCount;i++){
        const {x,y} = randomPointInside();
        setTimeout(()=>addBurstEmoji(x,y), i*30);
      }
    }

    function updateMessage(){
      opening.style.display = 'none';
      message.style.display = 'block';
      message.textContent = lines[idx];
      idx = (idx + 1) % lines.length;

      // rotate bubble position
      posClasses.forEach(c => message.classList.remove(c));
      const choice = posClasses[Math.floor(Math.random()*posClasses.length)];
      message.classList.add(choice);
    }

    // Debounce the tickle animation so it doesn't pile up
    let animLock = false;
    function tickle(){
      if (animLock) return;
      animLock = true;

      teddyBtn.classList.add('tickle');
      updateMessage();
      effects();

      setTimeout(()=>{
        teddyBtn.classList.remove('tickle');
        animLock = false;
      }, 420);
    }

    // Interactions
    teddyBtn.addEventListener('click', tickle, { passive: true });
    teddyBtn.addEventListener('keydown', e=>{
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        tickle();
      }
    });
  </script>
</body>
</html>
